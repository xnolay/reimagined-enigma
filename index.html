<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulir Pemesanan eHose</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 py-12 px-4">

    <!-- Form Order -->
    <section id="contact" class="bg-gradient-to-br from-gray-800 to-gray-900 p-8 md:p-16 rounded-2xl shadow-2xl max-w-2xl mx-auto">
        <div class="text-center text-white mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-2">Formulir Pemesanan eHose</h2>
            <p class="text-lg text-gray-300">Pilih produk yang Anda inginkan dan isi data diri untuk melakukan pemesanan.</p>
        </div>
        <form id="contact-form" class="mx-auto">
            <!-- Customer Data -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="nama" class="block text-sm font-medium text-gray-300 mb-2">Nama Lengkap</label>
                    <input type="text" id="nama" name="nama" required class="w-full px-4 py-3 bg-gray-700 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500">
                </div>
                <div>
                    <label for="perusahaan" class="block text-sm font-medium text-gray-300 mb-2">Nama Perusahaan</label>
                    <input type="text" id="perusahaan" name="perusahaan" class="w-full px-4 py-3 bg-gray-700 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500">
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Alamat Email</label>
                    <input type="email" id="email" name="email" required class="w-full px-4 py-3 bg-gray-700 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500">
                </div>
                <div>
                    <label for="telepon" class="block text-sm font-medium text-gray-300 mb-2">Nomor Telepon</label>
                    <input type="tel" id="telepon" name="telepon" required class="w-full px-4 py-3 bg-gray-700 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500">
                </div>
            </div>

            <!-- Order Section -->
            <div class="md:col-span-2 bg-gray-700/50 p-6 rounded-lg mt-6">
                <div class="flex justify-between items-center mb-4">
                     <label class="block text-sm font-medium text-gray-300">Pilih Produk</label>
                     <label class="block text-sm font-medium text-gray-300 pr-2">Jumlah</label>
                </div>
                <div id="order-items-container" class="space-y-3">
                    <!-- Items will be generated by JS -->
                </div>

                <!-- Total Display -->
                <div class="mt-6 text-right border-t border-gray-600 pt-4">
                    <p class="text-lg text-gray-300">Total Belanja:</p>
                    <p id="total-price" class="text-3xl font-bold text-cyan-400">Rp 0</p>
                </div>
            </div>
            
            <!-- Additional Message -->
            <div class="mt-6">
                <label for="pesan" class="block text-sm font-medium text-gray-300 mb-2">Pesan / Keterangan Tambahan</label>
                <textarea id="pesan" name="pesan" rows="4" class="w-full px-4 py-3 bg-gray-700 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500" placeholder="Contoh: Mohon dikirim ke alamat..."></textarea>
            </div>

            <!-- Submit Button -->
            <div class="text-center mt-8">
                <button type="submit" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-4 px-12 rounded-full text-lg w-full md:w-auto transition-transform transform hover:scale-105">
                    Pesan Sekarang via WhatsApp
                </button>
                <p id="form-message" class="mt-4 h-5"></p>
            </div>
        </form>
    </section>

    <script>
        // ----- Order Form Logic -----
        const orderItemsContainer = document.getElementById('order-items-container');
        const totalPriceDisplay = document.getElementById('total-price');
        const formMessage = document.getElementById('form-message');

        const productOptionsHTML = `
            <option value="Pilih Produk" data-price="0">-- Pilih Jenis Kabel --</option>
            <option value="ADSS 288 Core (24 Tube) 4KM" data-price="150000000">ADSS 288 Core (24 Tube) 4KM - Rp 150.000.000</option>
            <option value="ADSS 144 Core (12 Tube) 4KM" data-price="75000000">ADSS 144 Core (12 Tube) 4KM - Rp 75.000.000</option>
            <option value="ADSS 96 Core (8 Tube) 4KM" data-price="49900000">ADSS 96 Core (8 Tube) 4KM - Rp 49.900.000</option>
            <option value="ADSS 48 Core (4 Tube) 4KM" data-price="29990000">ADSS 48 Core (4 Tube) 4KM - Rp 29.990.000</option>
            <option value="ADSS 24 Core (4 Tube) 4KM" data-price="20999000">ADSS 24 Core (4 Tube) 4KM - Rp 20.999.000</option>
            <option value="Mini ADSS 24 Core 4KM" data-price="15980000">Mini ADSS 24 Core 4KM - Rp 15.980.000</option>
            <option value="Mini ADSS 24 Core 2KM" data-price="7900000">Mini ADSS 24 Core 2KM - Rp 7.900.000</option>
            <option value="Mini ADSS 12 Core 4KM" data-price="11702500">Mini ADSS 12 Core 4KM - Rp 11.702.500</option>
            <option value="Mini ADSS 12 Core 3KM" data-price="8827500">Mini ADSS 12 Core 3KM - Rp 8.827.500</option>
            <option value="Mini ADSS 12 Core 2KM" data-price="5500000">Mini ADSS 12 Core 2KM - Rp 5.500.000</option>
            <option value="Armoured GYXTW 12 Core 2KM" data-price="5990000">Armoured GYXTW 12 Core 2KM - Rp 5.990.000</option>
            <option value="Armoured GYXTW 4 Core 2KM" data-price="2990000">Armoured GYXTW 4 Core 2KM - Rp 2.990.000</option>
            <option value="Fig8 Armour 12 Core 2KM" data-price="5990000">Fig8 Armour 12 Core 2KM - Rp 5.990.000</option>
            <option value="Jelly Tube 12 Core 4KM" data-price="7490000">Jelly Tube 12 Core 4KM - Rp 7.490.000</option>
            <option value="Jelly Tube 12 Core 2KM" data-price="3745000">Jelly Tube 12 Core 2KM - Rp 3.745.000</option>
            <option value="FTTH Drop 4 Core Premium 2KM" data-price="1926000">FTTH Drop 4 Core Premium 2KM - Rp 1.926.000</option>
            <option value="FTTH Drop 2 Core Premium 2KM" data-price="1391000">FTTH Drop 2 Core Premium 2KM - Rp 1.391.000</option>
            <option value="FTTH Drop 1 Core Premium 1KM" data-price="685000">FTTH Drop 1 Core Premium 1KM - Rp 685.000</option>
        `;

        // Generate 8 order item rows
        for (let i = 1; i <= 8; i++) {
            const orderItem = document.createElement('div');
            orderItem.className = 'order-item grid grid-cols-3 gap-x-4 items-center';
            orderItem.innerHTML = `
                <div class="col-span-2">
                    <select class="product-select w-full px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 text-sm">
                        ${productOptionsHTML}
                    </select>
                </div>
                <div>
                    <input type="number" value="0" min="0" class="qty-input w-full px-4 py-2 bg-gray-800 text-white border border-gray-600 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 text-sm" placeholder="Qty">
                </div>
            `;
            orderItemsContainer.appendChild(orderItem);
        }
        
        function formatRupiah(number) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(number);
        }

        function calculateTotal() {
            let grandTotal = 0;
            document.querySelectorAll('.order-item').forEach(item => {
                const productSelect = item.querySelector('.product-select');
                const qtyInput = item.querySelector('.qty-input');
                if (productSelect && qtyInput) {
                    const selectedOption = productSelect.options[productSelect.selectedIndex];
                    const price = parseFloat(selectedOption.getAttribute('data-price')) || 0;
                    const quantity = parseInt(qtyInput.value) || 0;
                    grandTotal += price * quantity;
                }
            });
            totalPriceDisplay.textContent = formatRupiah(grandTotal);
        }

        document.querySelectorAll('.product-select, .qty-input').forEach(element => {
            element.addEventListener('change', calculateTotal);
            element.addEventListener('input', calculateTotal);
        });

        calculateTotal();

        const contactForm = document.getElementById('contact-form');

        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const nama = document.getElementById('nama').value;
            const perusahaan = document.getElementById('perusahaan').value;
            const email = document.getElementById('email').value;
            const telepon = document.getElementById('telepon').value;
            const pesan = document.getElementById('pesan').value;
            
            let orderDetails = '';
            document.querySelectorAll('.order-item').forEach((item, index) => {
                const productSelect = item.querySelector('.product-select');
                const qtyInput = item.querySelector('.qty-input');
                const quantity = parseInt(qtyInput.value) || 0;

                if (productSelect && qtyInput && quantity > 0 && productSelect.value !== "Pilih Produk") {
                    const selectedOption = productSelect.options[productSelect.selectedIndex];
                    const productName = selectedOption.value;
                    const unitPrice = parseFloat(selectedOption.getAttribute('data-price')) || 0;
                    const subTotal = unitPrice * quantity;

                    orderDetails += `\n\n*Item ${index + 1}:*`;
                    orderDetails += `\n- Produk: ${productName}`;
                    orderDetails += `\n- Harga Satuan: ${formatRupiah(unitPrice)}`;
                    orderDetails += `\n- Jumlah (Qty): ${quantity}`;
                    orderDetails += `\n- Sub Total: *${formatRupiah(subTotal)}*`;
                }
            });

            if (orderDetails.trim() === '') {
                formMessage.textContent = 'Mohon pilih minimal satu produk dan isi jumlahnya.';
                formMessage.classList.add('text-red-400');
                setTimeout(() => {
                    formMessage.textContent = '';
                    formMessage.classList.remove('text-red-400');
                }, 3000);
                return;
            }

            const totalPrice = totalPriceDisplay.textContent;

            const waMessage = `*Formulir Pemesanan eHose*

*Data Pelanggan:*
Nama: ${nama}
Perusahaan: ${perusahaan}
Email: ${email}
Telepon: ${telepon}
-----------------------------------
*Detail Pesanan:*${orderDetails}
-----------------------------------
*Total Belanja: ${totalPrice}*
-----------------------------------

*Pesan Tambahan:*
${pesan || '-'}`;

            const phoneNumber = '6281314271921';
            const waURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(waMessage)}`;
            
            window.open(waURL, '_blank');
            
            formMessage.textContent = 'Pesanan Anda sedang dialihkan ke WhatsApp...';
            formMessage.classList.remove('text-red-400');
            formMessage.classList.add('text-green-400');
            setTimeout(() => {
                formMessage.textContent = '';
                formMessage.classList.remove('text-green-400');
            }, 4000);
        });
    </script>
</body>
</html>
